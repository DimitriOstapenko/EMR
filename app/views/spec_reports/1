<%= simple_form_for [@patient,@spec_report], input_html: {multipart: true, class: 'dropzone' } do |f| %>
  <%= render 'shared/error_messages', object: f.object %>
  <% doc_id = @spec_report.doctor_id %>

<div class="row">
  <div class="col-md-6">
  <%= f.input :date, hint: 'Required', html5: true %>
  </div>
  <div class="col-md-6">
    <%= f.input :doctor_id, collection: Doctor.all, alue_method: :id, label_method: :lname, label: "To Doctor", include_blank: 'Please Select' %>
  </div>
</div>

<div class="row">
  <div class="col-sm-12">
    <%= f.input :authenticity_token, as: :hidden, input_html: {value: form_authenticity_token} %>
    <%= f.input :filename,  hint: 'Required', label: 'Upload PDF', multiple: false %> <%#, input_html: {class: 'dropzone'}%>
  </div>
</div>

<div class="row">
  <div class="col-sm-12">
     <%= f.submit yield(:button_text), class: "btn btn-primary" %>
  </div>
</div>

<% end %>

  
<%= form_tag "/patients/#{@patient.id}/spec_reports", method: :post, class: "dropzone", id: "my-dropzone" do %>
  <input name="authenticity_token" type="hidden" value="<%= form_authenticity_token %>" />
  <div class="fallback">
    <%= file_field_tag "filename", multiple: false %>
  </div>
<% end %>



<script>
$(function() {
  var myDropzone = new Dropzone("div#myDropzone", { url: "/uploads/uploaded_file"});
};

  Dropzone.options.myDropzone = {
  paramName: "filename", // The name that will be used to transfer the file
  maxFilesize: 2, // MB
  accept: function(filename, done) {
    done(); 
  }
  };

/*

  $(function() {
  var mediaDropzone;
  mediaDropzone = new Dropzone("#my-dropzone");
  mediaDropzone.options.acceptedFiles = ".pdf,.jpg,.jpeg,.png,.gif";
  return mediaDropzone.on("success", function(file, responseText) {
    var imageUrl;
    imageUrl = responseText.file_name.url;
    alert(imageUrl);
  });
});
*/
</script>

